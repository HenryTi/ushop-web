(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[344],{163:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/auth/login",function(){return c(1881)}])},1881:function(a,b,c){"use strict";c.r(b),c.d(b,{"__N_SSP":function(){return p},default:function(){return q}});var d=c(7568),e=c(6042),f=c(9396),g=c(4051),h=c.n(g),i=c(5893),j=c(1163),k=c(7536),l=c(7533),m=c(4231),n=c(7441),o=c(4902),p=!0;function q(a){var b=a.backurl,c=function(a){var b=a.name,c=a.type,d=a.label,h=B[b];return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("label",{children:d}),(0,i.jsx)("input",(0,f.Z)((0,e.Z)({name:b,type:null!=c?c:"text"},w(b)),{className:"form-control ".concat(h?"is-invalid":"")})),(0,i.jsx)(g,{name:b})]})},g=function(a){var b=B[a.name];return b?(0,i.jsx)("div",{className:"invalid-feedback",children:null==b?void 0:b.message}):null},p=function(a){var b=a.name,d=a.type,e=a.label;return(0,i.jsx)("div",{className:"mb-3",children:(0,i.jsx)(c,{name:b,type:d,label:e})})},q=function(a){var b=B[a.name];return b?(0,i.jsxs)("div",{className:"alert alert-info text-danger",children:[(0,i.jsx)(o.FA,{name:"exclamation-circle",className:"me-3"}),null==b?void 0:b.message]}):null},r=function(){return(0,i.jsxs)("button",{disabled:z.isSubmitting,className:"btn btn-primary",children:[z.isSubmitting&&(0,i.jsx)("span",{className:"spinner-border spinner-border-sm mr-1"}),"Login"]})},s=(0,j.useRouter)(),t=m.Ry().shape({username:m.Z_().required("Username is required"),password:m.Z_().required("Password is required")}),u={resolver:(0,l.X)(t)},v=(0,k.cI)(u),w=v.register,x=v.handleSubmit,y=v.setError,z=v.formState,A=v.clearErrors,B=z.errors;function C(){return(C=(0,d.Z)(h().mark(function a(c){var d,e,f;return h().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return d=c.username,e=c.password,A("apiError"),a.next=4,n.W.login(d,e);case 4:if(""!==(f=a.sent)){a.next=8;break}return y("apiError",{message:"user or password error!"}),a.abrupt("return");case 8:s.push(b);case 9:case"end":return a.stop()}},a)}))).apply(this,arguments)}return(0,i.jsxs)("div",{className:"container",children:[(0,i.jsxs)("div",{className:"col-lg-4 offset-lg-4 col-md-6 offset-md-3 col-sm-8 offset-sm-2 mt-5",children:[(0,i.jsxs)("div",{className:"alert alert-info",children:["Username: test",(0,i.jsx)("br",{}),"Password: test"]}),(0,i.jsxs)("div",{className:"card",children:[(0,i.jsx)("h4",{className:"card-header",children:"Next.js JWT Login Example"}),(0,i.jsx)("div",{className:"card-body",children:(0,i.jsxs)("form",{onSubmit:x(function(a){return C.apply(this,arguments)}),children:[(0,i.jsx)(p,{name:"username",label:"UserName"}),(0,i.jsx)(p,{name:"password",label:"Password",type:"password"}),(0,i.jsx)(q,{name:"apiError"}),(0,i.jsx)(r,{})]})})]})]}),(0,i.jsx)("div",{className:"row mb-3",children:(0,i.jsxs)("div",{className:"offset-sm-2",children:[(0,i.jsx)("button",{className:"btn btn-link",onClick:function(){return alert("forget")},children:"忘记密码"}),(0,i.jsx)("button",{className:"btn btn-link",onClick:function(){return alert("register")},children:"注册账号"})]})}),(0,i.jsx)("div",{className:"flex-fill"}),(0,i.jsx)("div",{className:"flex-fill"})]})}}},function(a){a.O(0,[994,936,418,774,888,179],function(){var b;return a(a.s=163)}),_N_E=a.O()}])